#
# Current date
#
snippet date "Adds the current date." wm
`!p
import datetime

now = datetime.date.today()
snip.rv += "%04d-%02d-%02d" % (now.year, now.month, now.day)
`
endsnippet

#
# snippet: time
# w (word boundary),
# m (trim spaces on the right of the script)
# Current time
#
snippet time "Current time" wm
`!p
import datetime

now = datetime.datetime.now()
snip.rv += "%02d:%02d:%02d" % (now.hour, now.minute, now.second)
`
endsnippet

#
# Current folder.
#
snippet pwd "Adds the current folder" wm
`!p
import os

snip.rv += os.getcwd()
`
endsnippet

snippet bm "Bogdan Mustiata" wm
Bogdan Mustiata
endsnippet

snippet bme "Bogdan Mustiata <bogdan.mustiata@gmail.com>" wm
Bogdan Mustiata <${1:bogdan.mustiata@gmail.com}>
endsnippet

#
# snippet: dtime
# w (word boundary),
# m (trim spaces on the right of the script)
# Add the current timestamp
#
snippet datetime "Add the current timestamp" wm
`!p
import datetime

now = datetime.date.today()
snip.rv += "%04d.%02d.%02d-" % (now.year, now.month, now.day)
now = datetime.datetime.now()
snip.rv += "%02d:%02d:%02d" % (now.hour, now.minute, now.second)
`
endsnippet

#
# snippet: rescape
# w (word boundary),
# m (trim spaces on the right of the script)
# Escape the text under cursor as a regexp.
#
snippet resc "Escape the text under cursor as a regexp." wm
`!p

snip.rv += snip.v.text\
	.replace('\\', '\\\\')\
	.replace('/', '\\/')\
	.replace('(', '\\(')\
	.replace(')', '\\)')\
	.replace('{', '\\{')\
	.replace('}', '\\}')\
	.replace('[', '\\[')\
	.replace(']', '\\]')\
	.replace('.', '\\.')\
	.replace('?', '\\?')\
	.replace('\n', '\\n')

`
endsnippet

#
# snippet: htmlesc
# w (word boundary),
# m (trim spaces on the right of the script)
# Escape the current text as HTML
#
snippet htmlesc "Escape the current text as HTML" wm
`!p

snip.rv += snip.v.text\
	.replace('&', '&amp;')\
	.replace('<', '&lt;')\
	.replace('>', '&gt;')
`
endsnippet

#
# snippet: htmldecode
# w (word boundary),
# m (trim spaces on the right of the script)
# Decode the current HTML back into text.
#
snippet htmldecode "Decode the current HTML back into text." wm
`!p
snip.rv += snip.v.text\
	.replace('&amp;', '&')\
	.replace('&lt;', '<')\
	.replace('&gt;', '>')
`
endsnippet

#
# snippet: sescape
# w (word boundary),
# m (trim spaces on the right of the script)
# Escape the text under the cursor as a string.
#
snippet sesc "Escape the text under the cursor as a string." wm
`!p

snip.rv += '"' + snip.v.text\
	.replace('\\', '\\\\')\
	.replace('"', '\\"')\
	.replace('\n', '\\n')\
	+ '"'

`
endsnippet

#
# snippet: ssescape
# w (word boundary),
# m (trim spaces on the right of the script)
# Escape the text under the cursor as a string for use in the shell.
#
snippet ssesc "Escape the text under the cursor as a shell string." wm
`!p

snip.rv += '"' + snip.v.text\
	.replace('\\', '\\\\')\
	.replace('"', '\\"')\
	.replace('$', '\\$')\
	.replace('\n', '\\n')\
	+ '"'
`
endsnippet

#
# snippet: qesc
# w (word boundary),
# m (trim spaces on the right of the script)
# Escape the text under the cursor as a single quote string.
#
snippet qesc "Escape the text under the cursor as a single quote string." wm
`!p

snip.rv += "'" + snip.v.text\
	.replace('\\', '\\\\')\
	.replace("'", "\\'")\
	.replace('\n', '\\n')\
	+ "'"

`
endsnippet

#
# snippet: base64encode
# w (word boundary),
# m (trim spaces on the right of the script)
# Encode the text selected as base64
#
snippet base64encode "Encode the text selected as base64" wm
`!p
import base64

snip.rv += base64.b64encode(snip.v.text.encode('utf-8')).decode('utf-8')
`
endsnippet

#
# snippet: hexencode
# w (word boundary),
# m (trim spaces on the right of the script)
# Encode the selected text as hex
#
snippet hexencode "Encode the selected text as hex" wm
`!p
snip.rv += snip.v.text.encode('utf-8').hex()
`
endsnippet

#
# snippet: base64decode
# w (word boundary),
# m (trim spaces on the right of the script)
# Decode the selected text from base64
#
snippet base64decode "Decode the selected text from base64" wm
`!p
import base64

snip.rv += base64.b64decode(snip.v.text).decode('utf-8')
`
endsnippet

#
# snippet: hexdecode
# w (word boundary),
# m (trim spaces on the right of the script)
# Decode the selected text from hex
#
snippet hexdecode "Decode the selected text from hex" wm
`!p
snip.rv += bytes.fromhex(snip.v.text).decode('utf-8')
`
endsnippet

#
# snippet: md5
# w (word boundary),
# m (trim spaces on the right of the script)
# Get the MD5 hash of the selected text
#
snippet md5 "Get the MD5 hash of the selected text" wm
`!p
import hashlib

snip.rv += hashlib.md5(snip.v.text).hexdigest()
`
endsnippet

#
# snippet: sha1
# w (word boundary),
# m (trim spaces on the right of the script)
# Get the SHA1 hash of the selected text
#
snippet sha1 "Get the SHA1 hash of the selected text" wm
`!p
import hashlib

snip.rv += hashlib.sha1(snip.v.text).hexdigest()
`
endsnippet

#
# snippet: sha256
# w (word boundary),
# m (trim spaces on the right of the script)
# Get the SHA256 hash of the selected text
#
snippet sha256 "Get the SHA256 hash of the selected text" wm
`!p
import hashlib

snip.rv += hashlib.sha256(snip.v.text).hexdigest()
`
endsnippet

#
# snippet: sha512
# w (word boundary),
# m (trim spaces on the right of the script)
# Get the SHA512 hash of the selected text
#
snippet sha512 "Get the SHA512 hash of the selected text" wm
`!p
import hashlib

snip.rv += hashlib.sha512(snip.v.text).hexdigest()
`
endsnippet

#
# snippet: uuid
# w (word boundary),
# m (trim spaces on the right of the script)
# Create an UUID
#
snippet uuid "Create an UUID" wm
`!p
import uuid

snip.rv += str(uuid.uuid4())
`
endsnippet

#
# snippet: uc4
# w (word boundary),
# m (trim spaces on the right of the script)
# Decode an UC4 script
#
snippet uc4 "Decode an UC4 script" wm
`!p
import xml.etree.ElementTree as ET

def convert_to_uc4_script(content):
    response = ""
    t = ET.fromstring(f'<root>{content}</root>')
    for n in t:
        response += n.text + "\n"

    return response

snip.rv += convert_to_uc4_script(snip.v.text)
`
endsnippet
