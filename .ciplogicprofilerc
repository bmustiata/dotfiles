#
# Byobu
#
# you need to add this into the ~/.bashrc that gets executed every
# time a new bash instance is started. .profile is executed only
# on login, and byobu trips on new instances.
#
# This should be before nvm registrations, etc.
#

if [[ "$BYOBU_TTY" == "" ]]; then
    byobu new-session
    return
fi # [[ "$BYOBU_TTY" == "" ]]

export EDITOR=vim
export PATH="${HOME}/bin:$PATH"
export PATH="${HOME}/bin/docker/:$PATH"

export ARS_PROJECTS_FOLDER="/home/raptor/projects/dotfiles/.projects"
export VIM_ULTISNIPS_FOLDER="/home/raptor/.vim/bundle/ciplogic/UltiSnips"

export PATH="$HOME/programs/VSCode-linux-x64/bin:$PATH"
export PATH="/home/raptor/programs/algs4/bin:$PATH"


export PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '

export GOPATH="$HOME/programs/go/tools"
export PATH="$GOPATH/bin:$PATH"

# this is for byobu usage
alias vim="TERM=xterm-256color vim"

. ~/bin/async

. ~/.nvm/nvm.sh
. ~/.nvm/bash_completion

nvm use v6

unset CIPLOGIC_ARCHER_CURRENT_PROJECT
unset CIPLOGIC_ARCHER_CURRENT_PY
unset CIPLOGIC_ARCHER_CURRENT_SERVER

eval $(archer project)
eval $(archer server)
eval $(archer py)

alias p=project
alias s=server

alias npmi="npm install --save -E"
alias npmd="npm install --save-dev -E"
alias npmg="npm install -g"

alias cddot="cd $(dirname $(readlink -f ${HOME}/.ciplogicprofilerc))"

alias ap="ansible-playbook"
alias a="ansible"

alias ai="ansible -i /home/raptor/learn/learn/adoc/inventory"
alias api="ansible-playbook -i /home/raptor/learn/learn/adoc/inventory"

#
# Powerline Shell
#

function _update_ps1() {
    PS1="$(~/.shell/powerline-shell.py $? 2> /dev/null)"
}

if [ "$TERM" != "linux" ]; then
    PROMPT_COMMAND="_update_ps1; $PROMPT_COMMAND"
fi

#
# MOTD
#
WEEKLY_FILE="$HOME/learn/learn/plan/$(date '+%Y')/weekly/week$(date '+%W').adoc"
if [[ -f $WEEKLY_FILE ]]; then
    cat $WEEKLY_FILE
fi # [[ -f  ]]

DAILY_FILE="$HOME/learn/learn/plan/$(date '+%Y')/daily/$(date '+%Y.%m.%d').adoc"
if [[ -f $DAILY_FILE ]]; then
    cat $DAILY_FILE
fi # [[ -f  ]]

